<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>

	<body>

        <!-- 第一种方案
		<div>
			<input type="file" id="fileBtn" accept="image/*">
		</div>

        <div> 
        	<img src="" id="img" style="width:200px;height:300px;" />
        </div> -->

        <!-- 第二种方案
        <div>
			<input type="file" id="fileBtn" accept="image/*" onchange="upload('#fileBtn', '#img');">
		</div>

        <div>
        	<img src="" id="img" style="width:200px;height:300px;" />
        </div> -->

        <div>
			<input type="file" id="fileBtn" accept="image/*">
		</div>

        <div> 
        	<img src="" id="img" style="width:200px;height:300px;" />
        </div>
        
	</body>

  <script>
  	/* 第一种方案
  	window.onload = function () {
        var fileTag = document.getElementById('fileBtn');
        fileTag.onchange = function () {
            var file = fileTag.files[0];
            var fileReader = new FileReader();
            fileReader.onloadend = function () {
                if (fileReader.readyState == fileReader.DONE) {
                    document.getElementById('img').setAttribute('src', fileReader.result);
                }
            };
            fileReader.readAsDataURL(file);
        };
    };
    */

    /*
    FileReader作为文件API的重要成员用于读取文件，根据W3C的定义，FileReader接口提供了读取文件的方法和包含读取结果的事件模型。
    调用 FileReader 的 readAsDataURL 接口，将启动异步加载文件内容，通过给 reader 监听一个 onload 事件，
    将数据加载完毕后，在onload事件处理中，通过 event 的 result 属性即可获得文件内容，然后扔进 img 的 src 即可 打开图片并预览。
    */

    /* 第二种方案
    function upload(input, img) {
      	var fileInput = document.querySelector(input),
          	preImg = document.querySelector(img),
          	file = fileInput.files[0],
          	reader = new FileReader();
      	reader.readAsDataURL(file);
      	reader.onload = function(e){
        	preImg.setAttribute("src", e.target.result);
      	};
    }
    */
    
    /* 第三种方案
  	var fileInput = document.querySelector('input[type=file]'),
        previewImg = document.querySelector('img');
  	fileInput.addEventListener('change', function () {
      	var file = this.files[0];
      	var reader = new FileReader();
      	// 监听reader对象的的onload事件，当图片加载完成时，把base64编码賦值给预览图片
      	reader.addEventListener("load", function () {
          	previewImg.src = reader.result;
      	}, false);
      	// 调用reader.readAsDataURL()方法，把图片转成base64
      	reader.readAsDataURL(file);
  	}, false);
  	*/

  	var fileInput = document.getElementById('fileBtn'),
        previewImg = document.getElementById('img');
  	fileInput.addEventListener('change', function () {
      	var file = this.files[0];
      	var reader = new FileReader();
      	// 监听reader对象的的onload事件，当图片加载完成时，把base64编码賦值给预览图片
      	reader.addEventListener("load", function () {
          	previewImg.src = reader.result;
      	}, false);
      	// 调用reader.readAsDataURL()方法，把图片转成base64
      	reader.readAsDataURL(file);
  	}, false);

  </script>
    
</html>
